(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},2628:(e,r,t)=>{"use strict";t.d(r,{A:()=>i,AuthProvider:()=>o});var s=t(5155),n=t(2115),a=t(6046);let l=(0,n.createContext)({user:null,loading:!0,login:()=>{},logout:()=>{},isAuthenticated:!1});function o(e){let{children:r}=e,[t,o]=(0,n.useState)(null),[i,d]=(0,n.useState)(!0),c=(0,a.useRouter)(),m=(0,a.usePathname)();return(0,n.useEffect)(()=>{(()=>{let e=localStorage.getItem("token"),r=localStorage.getItem("user");if(e&&r)try{let e=JSON.parse(r);o(e)}catch(e){console.error("Error parsing user data:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}d(!1)})()},[]),(0,n.useEffect)(()=>{!i&&(["/","/auth/login"].includes(m)||t||c.push("/auth/login"),["/admin"].includes(m)&&t?.role!=="admin"&&c.push("/payment"))},[i,t,m,c]),(0,s.jsx)(l.Provider,{value:{user:t,loading:i,login:(e,r)=>{localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(r)),o(r)},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),o(null),c.push("/auth/login")},isAuthenticated:!!t},children:r})}function i(){return(0,n.useContext)(l)}},3512:(e,r,t)=>{"use strict";t.d(r,{default:()=>c});var s=t(5155),n=t(2115),a=t(8173),l=t.n(a),o=t(6046),i=t(2628);function d(){let e=(0,o.usePathname)(),{user:r,logout:t,isAuthenticated:a}=(0,i.A)(),[d,c]=(0,n.useState)(!1);return(0,s.jsxs)("nav",{className:"bg-white shadow-sm border-b",children:[(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l(),{href:"/",className:"flex-shrink-0 text-blue-600 font-bold text-lg",children:"SecurePay"}),(0,s.jsxs)("div",{className:"hidden md:ml-10 md:flex space-x-8",children:[(0,s.jsx)(l(),{href:"/",className:`h-16 inline-flex items-center px-1 pt-1 text-sm font-medium border-b-2 ${"/"===e?"border-blue-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Home"}),a&&(0,s.jsx)(l(),{href:"/payment",className:`h-16 inline-flex items-center px-1 pt-1 text-sm font-medium border-b-2 ${"/payment"===e?"border-blue-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Payment System"}),a&&r?.role==="admin"&&(0,s.jsx)(l(),{href:"/admin",className:`h-16 inline-flex items-center px-1 pt-1 text-sm font-medium border-b-2 ${"/admin"===e?"border-blue-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Admin Panel"})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:a?(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"flex items-center text-green-600",children:[(0,s.jsx)("span",{className:"h-3 w-3 rounded-full bg-green-500 mr-1"}),(0,s.jsx)("span",{className:"text-xs text-gray-700",children:"System Secure"})]}),(0,s.jsxs)("span",{className:"text-sm text-gray-700",children:[r?.name," (",r?.region,")"]}),(0,s.jsx)("button",{onClick:t,className:"text-sm font-medium text-blue-600 hover:text-blue-500",children:"Logout"})]}):(0,s.jsx)(l(),{href:"/auth/login",className:"text-sm font-medium text-blue-600 hover:text-blue-500",children:"Sign in"})}),(0,s.jsx)("div",{className:"md:hidden flex items-center",children:(0,s.jsxs)("button",{onClick:()=>c(!d),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none",children:[(0,s.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,s.jsx)("svg",{className:`${d?"hidden":"block"} h-6 w-6`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),(0,s.jsx)("svg",{className:`${d?"block":"hidden"} h-6 w-6`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})})]})]})}),(0,s.jsx)("div",{className:`${d?"block":"hidden"} md:hidden`,children:(0,s.jsxs)("div",{className:"space-y-1 pb-3 pt-2",children:[(0,s.jsx)(l(),{href:"/",className:`block py-2 px-4 text-base font-medium ${"/"===e?"bg-blue-50 border-l-4 border-blue-500 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:border-l-4 hover:border-gray-300 hover:text-gray-800"}`,onClick:()=>c(!1),children:"Home"}),a&&(0,s.jsx)(l(),{href:"/payment",className:`block py-2 px-4 text-base font-medium ${"/payment"===e?"bg-blue-50 border-l-4 border-blue-500 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:border-l-4 hover:border-gray-300 hover:text-gray-800"}`,onClick:()=>c(!1),children:"Payment System"}),a&&r?.role==="admin"&&(0,s.jsx)(l(),{href:"/admin",className:`block py-2 px-4 text-base font-medium ${"/admin"===e?"bg-blue-50 border-l-4 border-blue-500 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:border-l-4 hover:border-gray-300 hover:text-gray-800"}`,onClick:()=>c(!1),children:"Admin Panel"}),a?(0,s.jsxs)("button",{onClick:()=>{t(),c(!1)},className:"block w-full text-left py-2 px-4 text-base font-medium text-gray-600 hover:bg-gray-50 hover:border-l-4 hover:border-gray-300 hover:text-gray-800",children:["Logout (",r?.name,")"]}):(0,s.jsx)(l(),{href:"/auth/login",className:"block py-2 px-4 text-base font-medium text-gray-600 hover:bg-gray-50 hover:border-l-4 hover:border-gray-300 hover:text-gray-800",onClick:()=>c(!1),children:"Sign in"})]})})]})}function c(e){let{children:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d,{}),(0,s.jsx)("main",{children:r})]})}},6046:(e,r,t)=>{"use strict";var s=t(6658);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},6710:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,8346,23)),Promise.resolve().then(t.t.bind(t,347,23)),Promise.resolve().then(t.bind(t,3512)),Promise.resolve().then(t.bind(t,2628))},8346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}}},e=>{var r=r=>e(e.s=r);e.O(0,[838,441,587,358],()=>r(6710)),_N_E=e.O()}]);