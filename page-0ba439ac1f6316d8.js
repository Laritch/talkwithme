(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{2273:(e,s,r)=>{"use strict";r.d(s,{default:()=>l});var t=r(5155),a=r(2115),o=r(6046);function l(){let e=(0,o.useRouter)(),[s,r]=(0,a.useState)(""),[l,n]=(0,a.useState)(""),[d,i]=(0,a.useState)(""),[c,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(!1),[h,b]=(0,a.useState)(""),p=async r=>{r.preventDefault(),b(""),x(!0);try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:l,twoFactorCode:c?d:void 0})}),t=await r.json();if(!r.ok)throw Error(t.error||"Login failed");if(t.requiresTwoFactor){m(!0),x(!1);return}localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),"admin"===t.user.role?e.push("/admin"):e.push("/payment")}catch(e){b(e instanceof Error?e.message:"Login failed"),x(!1)}};return(0,t.jsxs)("div",{className:"mt-8 bg-white p-8 shadow-sm rounded-lg border border-gray-200",children:[h&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 border border-red-200 rounded-md",children:h}),(0,t.jsxs)("form",{className:"space-y-6",onSubmit:p,children:[c?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{htmlFor:"twoFactorCode",className:"block text-sm font-medium text-gray-700",children:"Two-Factor Code"}),(0,t.jsx)("button",{type:"button",onClick:()=>m(!1),className:"text-sm text-blue-600 hover:text-blue-500",children:"Back"})]}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{id:"twoFactorCode",name:"twoFactorCode",type:"text",inputMode:"numeric",autoComplete:"one-time-code",required:!0,value:d,onChange:e=>i(e.target.value),className:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",placeholder:"Enter 6-digit code",maxLength:6})}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Enter the 6-digit code from your authenticator app"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:e=>r(e.target.value),className:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:l,onChange:e=>n(e.target.value),className:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,t.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),(0,t.jsx)("div",{className:"text-sm",children:(0,t.jsx)("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:u,className:`flex w-full justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium text-white shadow-sm ${u?"bg-blue-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}`,children:u?"Signing in...":c?"Verify":"Sign in"})})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"bg-white px-2 text-gray-500",children:"Demo Accounts"})})]}),(0,t.jsxs)("div",{className:"mt-4 space-y-2 text-xs text-gray-500",children:[(0,t.jsx)("p",{children:"Regular User: user@example.com / password123"}),(0,t.jsx)("p",{children:"Admin User: admin@example.com / password123 (with 2FA)"}),(0,t.jsx)("p",{children:"EU User: user2@example.com / password123 (with 2FA)"})]})]})]})}},6046:(e,s,r)=>{"use strict";var t=r(6658);r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},8490:(e,s,r)=>{Promise.resolve().then(r.bind(r,2273))}},e=>{var s=s=>e(e.s=s);e.O(0,[441,587,358],()=>s(8490)),_N_E=e.O()}]);